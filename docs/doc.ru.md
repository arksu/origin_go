** Server **

- используется ECS для обсчета сущностей
- shard реализует ECS, шард - слой мира (region)
- системы:
    - movement (priority 100):
        - обновляет сущности, имеющие компоненты Position и Velocity; читает MovementTarget и Speed, чтобы задать нужную скорость и направление (по умолчанию 10 ед/с), при достижении цели удаляет MovementTarget и сбрасывает скорость @internal/ecs/systems/movement.go#14-99
        - простое прибавление смещения (vel * dt) выполняется только для сущностей без Collider — иначе перемещение передается в систему столкновений, чтобы избежать «проскальзывания» через препятствия @internal/ecs/systems/movement.go#33-58
        - вспомогательные методы SetTarget/SetFollowTarget/StopMovement управляют компонентами движения и используются сетевыми хэндлерами (например, на клик по карте) для назначения новой цели @internal/ecs/systems/movement.go#101-125 @internal/network/handlers.go#83-122
    - collider (priority 200):
        - после Movement собирает все статичные сущности (Static + Collider) в spatial hash, затем обрабатывает динамические сущности (Position + Velocity + Collider, без Static) и выполняет swept-AABB резолвинг по стенам итеративно, ограничивая число шагов maxCollisionIterations @internal/ecs/systems/collision.go#10-347
        - после статического резолвинга вставляет динамику в отдельный spatial hash и выполняет фазу dynamic-dynamic push-back, чтобы раздвинуть пересекающиеся движущиеся объекты @internal/ecs/systems/collision.go#330-347
        - CollisionSystem хранит события столкновений, которые могут дальше использоваться другими подсистемами; параметры коллайдеров (ширина/высота, маски слоёв) проверяются при подборе кандидатов, что позволяет фильтровать «несовместимые» типы объектов @internal/ecs/systems/collision.go#231-347


** TODO **

- Логика спавна игрока: Shard.SpawnPlayer реализован, включает fallback позиции, создание компонентов, 
    регистрацию игрока @internal/game/spawn.go#34-167. Однако пункт TODO про проверку коллизий с сущностями ещё не реализован 
    (только walkable tiles) @internal/game/spawn.go#83-110.
- Игровой цикл сервера: в Shard не видно вызова world.Update или глобального тика — отсутствует. 
  Требуется серверный луп, который обновляет ECS и инициирует рассылку (см. правило 4/5).
